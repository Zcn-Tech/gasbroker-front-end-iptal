<div class="flex flex-col flex-auto min-w-0">
    <div class="flex-auto p-6 sm:p-10">

        <div class="max-w-3xl">


            <form class="p-4 bg-card shadow rounded overflow-hidden" [formGroup]="verticalStepperForm">
                <mat-vertical-stepper [linear]="true" #verticalStepper>
                    <mat-step [formGroupName]="'step1'" [stepControl]="verticalStepperForm.get('step1')"
                        #verticalStepperStep1>
                        <ng-template matStepLabel>Temel Bilgiler</ng-template>

                        <div class="flex flex-col gt-xs:flex-row">
                            <mat-form-field class="flex-auto gt-xs:pr-3">
                                <mat-label>İşlem Tipi</mat-label>
                                <mat-select [formControlName]="'type'"  (selectionChange)="onChangeType($event)">
                                    <mat-option *ngFor="let option of dataSourceTypes" [value]="option.description">
                                        <ng-container>
                                            {{option.description | titlecase}}
                                        </ng-container>
                                    </mat-option>
                                </mat-select>
                               <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:location-marker'">
                                </mat-icon>
                            </mat-form-field>
                            <mat-form-field class="flex-auto gt-xs:pr-3">
                                <mat-label>Durum</mat-label>
                                <mat-select [formControlName]="'status'">
                                    <mat-option *ngFor="let option of dataSourceStatus" [value]="option.description">
                                        <ng-container>
                                            {{option.description | titlecase}}
                                        </ng-container>
                                    </mat-option>
                                </mat-select>
                               <mat-icon class="icon-size-5" matPrefix [svgIcon]="'heroicons_solid:location-marker'">
                                </mat-icon>
                            </mat-form-field>
                            <mat-form-field class="fuse-mat-no-subscript w-full">
                                <mat-label>Yayınlanma Tarihi</mat-label>
                                <input matInput [matDatepicker]="DatepickerPublish" [formControlName]="'publish_date'"
                                    [placeholder]="'Yayınlanma Tarihi'">
                                <mat-datepicker-toggle matSuffix [for]="DatepickerPublish">
                                </mat-datepicker-toggle>
                                <mat-datepicker #DatepickerPublish></mat-datepicker>
                            </mat-form-field>
                            <mat-form-field class="fuse-mat-no-subscript w-full">
                                <mat-label>Son Teklif Tarihi</mat-label>
                                <input matInput [matDatepicker]="Datepicker" [formControlName]="'last_offer_date'"
                                    [placeholder]="'Son Teklif Tarihi'">
                                <mat-datepicker-toggle matSuffix [for]="Datepicker">
                                </mat-datepicker-toggle>
                                <mat-datepicker #Datepicker></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="flex justify-end">
                            <br/>
                            <button class="px-8" mat-flat-button [color]="'primary'"
                                [disabled]="verticalStepperStep1.stepControl.pristine || verticalStepperStep1.stepControl.invalid"
                                type="button" matStepperNext>
                                İleri
                            </button>
                        </div>
                    </mat-step>

                    <mat-step [formGroupName]="'step2'" [stepControl]="verticalStepperForm.get('step2')"
                        #verticalStepperStep2>
                        <ng-template matStepLabel>Ürün Bilgileri</ng-template>
                        <p class="my-6 font-medium">
                            Lütfen ürünü seçerek devame ediniz
                        </p>
                        <div class="flex flex-col gt-xs:flex-row">
                            <mat-label>Ürün</mat-label>
                            <mat-form-field class="fuse-mat-no-subscript flex-auto">
                                <input tabindex="-1" type="text" placeholder="Ürün" matInput formControlName="products"
                                    [matAutocomplete]="auto">
                                <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
                                    (optionSelected)="selectProduct($event)">
                                    <mat-option *ngFor="let option of filteredOptions | async" [value]="option.name">
                                        <ng-container>
                                            {{option.name | titlecase}}
                                        </ng-container>
                                    </mat-option>
                                </mat-autocomplete>
                            </mat-form-field>
                        </div>
                        <div class="flex">
                            <mat-form-field class="flex-auto">
                                <mat-label>Miktar</mat-label>
                                <input matInput [formControlName]="'quantity'" [placeholder]="'Birim'" required>
                                <span matPrefix>Adet</span>
                            </mat-form-field>
                        </div>
                        <div class="flex">
                        <mat-form-field class="fuse-mat-textarea flex-auto">
                            <mat-label>{{locationLabel}}</mat-label>

                            <textarea
                                matInput
                                [formControlName]="'location'"
                                placeholder="{{locationLabel}}"
                                [rows]="3"></textarea>
                            <mat-icon
                                class="icon-size-5"
                                matPrefix
                                [svgIcon]="'heroicons_solid:menu-alt-2'"></mat-icon>
                        </mat-form-field>
                    </div>
                        <div class="flex justify-end">
                            <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button"
                                matStepperPrevious>
                                Geri
                            </button>
                            <button class="px-8" mat-flat-button [color]="'primary'"
                                [disabled]="verticalStepperStep2.stepControl.pristine || verticalStepperStep2.stepControl.invalid"
                                type="button" matStepperNext>
                                İleri
                            </button>
                        </div>
                    </mat-step>

                    <mat-step [formGroupName]="'step3'" [stepControl]="verticalStepperForm.get('step3')">
                        <ng-template matStepLabel>Dokümanlar</ng-template>
                        <p class="my-6 font-medium">
                            
                        </p>
                        <div class="flex flex-col gt-sm:flex-row">
                            <div class="flex flex-col">
                                <span class="font-medium mb-2">Dokümanlar</span>
                                

                                <div class="flex flex-col"  *ngFor="let item of dataSourceDocs">
                                    <input
                                    id="avatar-file-input"
                                    class="absolute h-0 w-0 opacity-0 invisible pointer-events-none"
                                    type="file"
                                    [multiple]="false"
                                    [accept]="'image/jpeg, image/png'"
                                    (change)="uploadDocs(docsFileInput.files,item)"
                                    #docsFileInput >
                                 
                                
                                   
                                </div>
                              
                            </div>
                         
                        </div>
                        <div class="flex justify-end mt-8">
                            <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button"
                                matStepperPrevious>
                                Geri
                            </button>
                            <button class="px-8" mat-flat-button [color]="'primary'" type="button" matStepperNext>
                                İleri
                            </button>
                        </div>
                    </mat-step>

                    <mat-step>
                        <ng-template matStepLabel>Gönder</ng-template>
                        <p class="my-6 font-medium">
                            Lütfen gonderdiğiniz bilgilerin doğruluğundan emin olunuz.
                        </p>
                        <div class="flex justify-end mt-8">
                            <button class="px-8 mr-2" mat-flat-button [color]="'accent'" type="button"
                                matStepperPrevious>
                                Geri
                            </button>
                            <button class="px-8" mat-flat-button [color]="'primary'" type="reset"
                                (click)="verticalStepper.reset();">
                                İptal
                            </button>
                            <button class="px-8" mat-flat-button [color]="'secondary'" type="submit"
                                (click)="save()">
                               Gönder
                            </button>
                        </div>
                    </mat-step>
                </mat-vertical-stepper>
            </form>

        </div>

    </div>

</div>